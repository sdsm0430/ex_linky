<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CHINESE</title>
</head>
<body oncontextmenu="return false" ondragstart="return false" >
    <textarea id="customer-chat" type="text" cols="30" rows="15">
    </textarea>
</body>
<script>

/*
message 일정 수준 전달받으면 후기 url 페이지로 전달
순서 제대로 지정하기
song, actor, music 다 받아오기
*/

var pw = {{ password }};
var SuccessURL = "#";
    alert('"password"를 입력해주세요.');
var password = prompt("PASSWORD 입력", "");
    if(password == null){
        alert("암호를 다시 입력해주세요.");
        location = "#";
    }
    else{
        var combo = password;
        var total = combo.toLowerCase();

        if(total === pw[0].password){
            var chatSocket = new WebSocket(
                'ws://' + window.location.host +
                '/ws/chat/' + 'admin' + '/');

            chatSocket.onmessage = function(e) {
                var data = JSON.parse(e.data);
                var message = data['chinese'];
                /*
                if(message === "후기를 작성해주시면 감사하겠습니다."){
                    //자동으로 url 이동
                }
                */
                document.querySelector('#customer-chat').value = (message + '\n');
            };

            chatSocket.onclose = function(e) {
                console.error('Chat socket closed unexpectedly');
            };
        }
        else{
            alert("출입금지");
            location = "#";
        }
    }

// 개발자도구 F12 제어
function KeyEventHandle()
    {
            if(
            ( event.ctrlKey == true && ( event.keyCode == 78 || event.keyCode == 82 ) ) ||
    ( event.keyCode >= 112 && event.keyCode <= 123 ))
            {
                event.keyCode                = 0;
                event.cancelBubble        = true;
                event.returnValue        = false;
            }
    }
    document.onkeydown=KeyEventHandle;
    document.onkeyup=KeyEventHandle;
</script>
</html>